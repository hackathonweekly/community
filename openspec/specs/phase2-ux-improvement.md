# 社区平台 UX 改进方案 v1（Phase 2）

## 一、上一阶段重构回顾

### 已完成

| Phase | 内容 | 状态 |
|-------|------|------|
| Phase 1 | i18n 去掉 URL 语言前缀 | ✅ 完成 |
| Phase 2 | 路由扁平化，消除 `/app` 前缀 | ✅ 完成 |
| Phase 3 | `/me` 个人中心 + 活动/作品/任务页面合并 | ✅ 完成 |
| Phase 4 | 移动端 TabBar 重新设计 | ⚠️ 部分完成 |
| Phase 5 | 移动端 UI 规范统一 | ❌ 未开始 |

### 遗留问题

1. **移动端适配普遍不足**——活动、作品、任务、组织等页面在手机端体验粗糙
2. **导航结构仍有割裂感**——桌面端 NavBar 和移动端 TabBar 的信息架构不一致
3. **"我的"页面定位模糊**——既是个人中心又是功能入口，内容组织不够清晰
4. **"组织"入口位置不合理**——找合作伙伴、找项目等场景的入口藏得太深
5. **缺少社交互动感**——没有消息/动态系统，社区氛围弱

---

## 二、核心问题分析

### 2.1 移动端适配问题

当前代码中发现的具体问题：

| 页面 | 问题 | 文件 |
|------|------|------|
| 任务页 | 固定 `pt-32` 未做响应式，标题 `text-5xl` 在手机上过大 | `TasksTabs.tsx` |
| 任务大厅 | Select 组件使用固定宽度 `w-[140px]`、`w-[120px]` | `TaskHall.tsx` |
| 作品提交 | 固定宽度 `w-[160px]`、`w-[220px]` | `EventSubmissionsGallery.tsx` |
| 用户主页 | 按钮 `min-w-[140px]` 可能导致小屏溢出 | `ProfileHeader.tsx` |
| 各列表页 | 筛选器在手机端占用空间过大，信息密度低 | 多个组件 |

### 2.2 导航信息架构问题

**现状：**
- 桌面端 NavBar：活动、作品、组织、工具、文档 + 通知 + 登录/个人中心
- 移动端 TabBar（已登录）：发现、活动、+创建、通知、我的
- 移动端 TabBar（未登录）：发现、活动、组织、登录

**问题：**
1. 桌面端有"作品、组织、工具、文档"，移动端 TabBar 没有这些入口——用户在手机上找不到
2. "通知"占据了 TabBar 的一个宝贵位置，但社区目前没有强社交属性，通知量不大
3. "组织"只在未登录时出现在 TabBar，登录后反而消失了——但找合作伙伴恰恰是登录用户的需求
4. 桌面端 NavBar 在移动端完全隐藏，没有替代入口

### 2.3 "我的"页面问题

**现状内容：**
- 个人信息卡片（头像、名称、简介、等级、积分）
- 快捷入口：我的作品、我的活动、我的任务、我的贡献、我的收藏、我的关注
- 我的组织
- 支持：设置、文档、联系我们

**问题：**
- "我的组织"放在这里逻辑上说得通（我加入的组织），但用户想"发现组织/找合作伙伴"时不会来"我的"页面
- 缺少"我的消息"入口（虽然 TabBar 有通知，但"我的"页面作为 hub 应该也有）
- "文档"和"联系我们"放在个人中心底部有点突兀，更像是 app 级别的设置

### 2.4 "组织"定位问题

组织在社区中承担多重角色：
- **发现场景**：找外包团队、找创业伙伴、找项目合作方
- **管理场景**：管理自己的组织、查看组织成员
- **浏览场景**：看看社区有哪些活跃组织

当前"组织"只在 NavBar 和未登录 TabBar 中有入口，登录用户在移动端要通过"我的"页面才能到达，路径太深。

---

## 三、改进方案

### 3.1 重新设计信息架构

参考知乎、小红书、即刻的导航模式，结合社区平台特点：

**核心思路：**
- 移动端 TabBar 是最宝贵的导航资源，应该放最高频的功能
- 当前阶段是活动驱动型社区，"活动"应保持独立 Tab
- "组织"和"作品"等分类入口融入首页 Feed 顶部，不需要单独的"探索"页
- "消息"在社区产品中很重要（知乎、小红书都放在 TabBar）

**TabBar 结构：**

```
移动端 TabBar（已登录）：
[首页]  [活动]  [+创建]  [消息]  [我的]

移动端 TabBar（未登录）：
[首页]  [活动]  [组织]  [消息]  [登录]
```

- **首页**（`/`）：信息流 + 顶部分类快捷入口（承担"探索"功能）
- **活动**（`/events`）：活动列表（社区最核心功能，独立 Tab）
- **+创建**：弹出 ActionSheet（创建活动/发布作品/发布任务）
- **消息**（`/notifications`）：通知中心（未来可扩展私信/群聊）
- **我的**（`/me`）：个人中心

未登录用户没有"创建"和"我的"，用"组织"和"登录"替代——因为未登录用户浏览组织是高频场景（了解社区有哪些团队）。

### 3.2 首页 Feed 改造（融合探索功能）

不单独做"探索"页面，而是把分类浏览入口融入首页 Feed 顶部。这样首页既是内容消费入口，也是分类导航入口：

```
首页 Feed 结构（已登录）：

┌──────────────────────────────────┐
│  🔍 搜索框                        │
├──────────────────────────────────┤
│  分类快捷入口（横向滚动/2x3网格）  │
│  [📅活动] [🏆作品] [🏢组织] [📋任务]│
├──────────────────────────────────┤
│  最近活动                         │
│  ┌────────────────────────┐      │
│  │ 活动卡片 x 3           │      │
│  └────────────────────────┘      │
│  查看全部活动 →                   │
├──────────────────────────────────┤
│  热门作品                         │
│  ┌────────────────────────┐      │
│  │ 作品卡片 x 4           │      │
│  └────────────────────────┘      │
│  查看全部作品 →                   │
├──────────────────────────────────┤
│  活跃组织                         │
│  ┌─────┐ ┌─────┐ ┌─────┐        │
│  │ Org1│ │ Org2│ │ Org3│        │
│  └─────┘ └─────┘ └─────┘        │
│  查看全部组织 →                   │
└──────────────────────────────────┘
```

**关键设计：**
- 顶部分类入口解决了"组织/作品/任务在移动端找不到"的问题
- 搜索框提供全局搜索能力
- Feed 内容按区块展示，每个区块有"查看全部"入口
- 当前首页已有类似结构（最近活动 + 最近作品 + 活跃组织），只需增加顶部分类入口和搜索框

### 3.3 重构"我的"页面

```
/me 页面结构（优化后）：

┌──────────────────────────────┐
│  头像  用户名                 │
│  简介 / 等级 / 积分           │
│  [编辑资料]  [查看主页]       │
├──────────────────────────────┤
│  📦 我的内容                  │
│  ├ 我的作品 (3)          →   │
│  ├ 我的活动 (5)          →   │
│  ├ 我的任务 (2)          →   │
│  └ 我的贡献              →   │
├──────────────────────────────┤
│  🏢 我的组织                  │
│  ├ XX组织（管理员）       →   │
│  └ YY组织（成员）         →   │
│  [发现更多组织]               │
├──────────────────────────────┤
│  ❤️ 我的收藏                  │
│  ├ 收藏的活动 (2)        →   │
│  ├ 收藏的作品 (4)        →   │
│  └ 关注的人 (8)          →   │
├──────────────────────────────┤
│  ⚙️ 设置与帮助                │
│  ├ 账号设置              →   │
│  ├ 深色模式              🌙   │
│  └ 语言                  中文  │
├──────────────────────────────┤
│  退出登录                     │
└──────────────────────────────┘
```

**改进点：**
1. 分组更清晰：我的内容 / 我的组织 / 我的收藏 / 设置
2. 组织部分直接展示已加入的组织列表（而非只是一个链接），并提供"发现更多组织"入口
3. 深色模式和语言切换直接内联在设置区域（不用跳转到设置页）
4. 移除"文档"和"联系我们"（这些属于首页分类入口或 Footer 的内容）
5. 增加"退出登录"按钮（移动端常见需求）

### 3.4 桌面端 NavBar 优化

```
桌面端 NavBar：
[Logo]  [活动] [作品] [组织] [更多▾]  ...  [🔔] [🌙] [🌐] [头像▾]

"更多"下拉菜单：
├ 任务
├ 工具
├ 文档
└ 博客
```

**改进点：**
1. 将低频入口（任务、工具、文档）收到"更多"下拉菜单中，减少 NavBar 拥挤
2. 保留活动、作品、组织作为一级入口（最高频）
3. 头像下拉菜单包含：个人中心、设置、退出登录

### 3.5 移动端 NavBar 策略

**决策：移动端不保留 NavBar，完全依赖 TabBar + 首页分类入口。**

理由：
- TabBar + 首页顶部分类入口已经覆盖了所有导航需求
- 移动端屏幕空间宝贵，顶部 NavBar 会挤压内容区域
- 知乎、小红书、即刻等成熟产品都是 TabBar-only 的移动端导航
- 当前实现已经是这样（NavBar 在移动端隐藏），只需要确保首页分类入口补齐即可

---

## 四、分阶段任务

### Phase A：移动端 UI 修复（紧急）

**目标**：修复所有已知的移动端适配问题，让现有页面在手机上可用。

**任务清单：**

A.1 修复任务页面响应式
  - `TasksTabs.tsx`：`pt-32` → `pt-6 md:pt-32`，标题 `text-5xl` → `text-2xl md:text-5xl`
  - `TaskHall.tsx`：固定宽度 Select → `w-full sm:w-[140px]`

A.2 修复作品提交页面
  - `EventSubmissionsGallery.tsx`：固定宽度元素改为响应式

A.3 修复用户主页
  - `ProfileHeader.tsx`：按钮 `min-w-[140px]` → 移动端自适应

A.4 统一列表页移动端间距
  - 所有列表页确保使用 `pt-6 md:pt-24 pb-20 md:pb-16` 模式
  - 确保内容区域有 `px-4` 内边距

A.5 优化筛选器移动端体验
  - 所有筛选器在移动端默认折叠
  - 使用"筛选"按钮 + Badge 显示已激活筛选数量
  - 参考活动页的实现模式推广到其他列表页

**预估改动文件**：15-20 个
**风险**：低（纯 CSS/样式修复）

---

### Phase B：首页改造 + 导航重构

**目标**：改造首页 Feed 融入分类导航，调整 TabBar 结构，解决"组织/作品/任务在移动端找不到"的问题。

**任务清单：**

B.1 首页 Feed 增加分类入口
  - 在 Feed 顶部增加搜索框
  - 搜索框下方增加分类快捷入口（横向滚动或 2x2 网格）
  - 分类：活动、作品、组织、任务（点击跳转到对应列表页）
  - 每个分类卡片显示图标 + 名称 + 简短数据（如"128 个活动"）

B.2 调整 TabBar 结构
  - 已登录：首页 / 活动 / +创建 / 消息 / 我的
  - 未登录：首页 / 活动 / 组织 / 消息 / 登录
  - "消息"替代原来的"通知"（为未来私信功能预留）

B.3 优化首页 Feed 内容区块
  - 保持现有的"最近活动 + 最近作品 + 活跃组织"区块
  - 每个区块增加"查看全部 →"链接
  - 优化移动端卡片布局和间距

B.4 桌面端 NavBar 调整
  - 将"工具"和"文档"收到"更多"下拉菜单
  - 保持活动、作品、组织作为一级入口

**预估改动文件**：10-15 个
**风险**：中（导航变更影响用户习惯）

---

### Phase C：重构"我的"页面

**目标**：优化"我的"页面的信息架构和视觉呈现。

**任务清单：**

C.1 重新组织"我的"页面内容分组
  - 按 3.3 节的设计重新分组
  - "我的内容"、"我的组织"、"我的收藏"、"设置与帮助"四个区块

C.2 组织区块改为直接展示
  - 不再只显示"我的组织 →"链接
  - 直接列出已加入的组织（头像 + 名称 + 角色）
  - 底部"发现更多组织"链接到 `/orgs`

C.3 内联常用设置
  - 深色模式切换直接在"我的"页面操作
  - 语言切换直接在"我的"页面操作
  - 减少跳转到设置页的需求

C.4 增加退出登录
  - 在页面底部增加"退出登录"按钮
  - 移动端用户经常需要这个功能

C.5 移除不属于个人中心的内容
  - "文档"链接移到首页分类入口或 Footer
  - "联系我们"移到设置页或 Footer

**预估改动文件**：5-10 个
**风险**：低

---

### Phase D：移动端 UI 规范统一

**目标**：按照统一的设计规范，系统性优化所有页面的移动端展示。

**任务清单：**

D.1 统一页面头部
  - 创建 `MobilePageHeader` 组件
  - 样式：`sticky top-0 z-20 bg-background/80 backdrop-blur-lg border-b h-12 px-4`
  - 支持：返回按钮 + 标题 + 右侧操作按钮
  - 在所有二级页面使用（活动详情、作品详情、设置页等）

D.2 统一卡片样式
  - 活动卡片（紧凑版）：时间 + 标题 + 地点/线上 + 状态标签，单行布局
  - 作品卡片（移动版）：两列网格，封面(16:9) + 标题 + 作者
  - 组织卡片（紧凑版）：Logo + 名称 + 成员数 + 一行简介
  - 任务卡片（紧凑版）：标题 + 状态 + 截止时间 + 奖励

D.3 统一空状态
  - 创建 `EmptyState` 共享组件
  - 居中图标 + 标题 + 描述 + 操作按钮
  - 替换各页面不一致的空状态

D.4 统一加载状态
  - 列表页使用骨架屏（Skeleton）
  - 创建 `CardSkeleton`、`ListSkeleton` 通用组件

D.5 触摸交互优化
  - 所有可点击元素添加 `active:scale-[0.98]` 或 `active:bg-accent` 反馈
  - 确保所有触摸目标 >= 44x44px（`min-h-[44px] min-w-[44px]`）
  - 列表项使用 `py-3` 确保足够的点击区域

**预估改动文件**：30-40 个
**风险**：低（纯视觉优化）

---

### Phase E：消息系统基础（可选/远期）

**目标**：为"消息"Tab 提供真实内容，增强社区互动感。

**任务清单：**

E.1 消息中心页面重构
  - 将 `/notifications` 升级为消息中心
  - Tab 结构：通知 / 互动 / 系统
  - "通知"：活动提醒、任务更新等
  - "互动"：点赞、评论、关注等社交互动
  - "系统"：系统公告、审核结果等

E.2 未来扩展预留
  - 数据模型预留私信字段
  - UI 预留"私信"Tab 位置
  - 暂不实现私信功能，但架构上做好准备

**预估改动文件**：5-10 个
**风险**：低（只是 UI 重组，不涉及新的后端逻辑）

---

## 五、Phase 依赖关系与推荐顺序

```
Phase A (移动端 UI 修复) ← 最紧急，立即可做
    ↓
Phase B (首页改造 + 导航重构) ← 解决信息架构问题
    ↓
Phase C (重构"我的"页面) ← 可与 B 并行
    ↓
Phase D (UI 规范统一) ← 可与 B/C 并行，逐页推进
    ↓
Phase E (消息系统) ← 远期，可独立推进
```

Phase A 是独立的修复工作，可以立即开始。
Phase B 和 C 无强依赖，可以并行推进。
Phase D 可以在任何阶段并行推进。
Phase E 是远期规划，不阻塞其他工作。

---

## 六、竞品参考

| 产品 | TabBar 结构 | 特点 |
|------|------------|------|
| 知乎 | 首页 / 直播 / + / 消息 / 我的 | 消息独立 Tab，强社交 |
| 小红书 | 首页 / 购物 / + / 消息 / 我 | 消息独立 Tab，创建居中 |
| 即刻 | 推荐 / 发现 / + / 消息 / 我 | 发现页做分类浏览 |
| lu.ma | 首页 / 探索 / + / 日历 / 我 | 探索页做活动发现 |
| Meetup | 首页 / 搜索 / + / 通知 / 我 | 搜索独立 Tab |

**共同点：**
- 都把"消息/通知"放在 TabBar（第4位）
- 都有"创建"按钮在中间位置
- "我的"固定在最右
- 第1-2位是内容消费的核心入口

我们的方案与这些产品的导航模式一致。
